<html>
    <head>
    <style>
        .standardTable {border: solid;
                     border-collapse:collapse;}
        .blackbox{border: solid;
                  height: 100px;
                  width: 100px;
                  text-align: center;
                  background-color: black;
                  border-color: white;
                  color: yellow;
                  vertical-align: top;}
        .sevenSegmentTable {color: white; border-color:white;
            border: solid; border-collapse: collapse;}
        .notsevenSegmentTable {border:none;}
        .horizontal   {width: 40px; height: 10px;}
        .vertical   {width: 10px; height: 40px;}
        .red   {background-color: red;}
        .corner {width:10px; height: 10px;}
        .middle {width: 40px; height: 40px;}
    </style>
    <script>
        function display(number){
            //for now just display the number in a <p> element
            document.getElementById("decimal_input").innerHTML=number;
            var bin = dec2bin(number);
            document.getElementById("binary_output").innerHTML=bin;
            
            //send binary number to function bin2ssd()
            document.getElementById("bin2ssd_input").innerHTML=bin;
            var ssd = bin2ssd(bin);
            document.getElementById("bin2ssd_output").innerHTML=ssd;
            
            //send ssd signals to function illuminate_segments()
            illuminate(ssd);
            document.getElementById("illuminate_output").innerHTML='done';
            
        }
        function bin2ssd(binary) {
            //convert the four bit input string into w,x,y,z variables
             var w = false // set them all to false at first then change if input is '1'
             var x = false
             var y = false
             var z = false
             if (binary[0] =='1') {w = true}
             if (binary[1] =='1') {x = true}
             if (binary[2] =='1') {y = true}
             if (binary[3] =='1') {z = true}
            // "compute" the value of logical expression for each segment
             var a =!w&x&z || w&!x&!y || !x&!y&!z || !w&y // set them to the initial default originally
             var b = !w&!x || !w&x&!y&!z  || !w&x&y&z || w&!x&!y
             var c = !x&!y || !w&!x&y&z || !w&x&!y&!z ||  !w&x&!y&z ||  !w&x&y
             var d = !w&!x&!z || !w&!x&y&z || !w&x&!y&z || !w&x&y&!z || w&!x&!y
             var e = !x&!y&!z || !w&y&!z
             var f = !w&x || w&!x&!y || !x&!w&!y&!z
             var g = !w&!x&y || !w&x&!y || !w&x&y&!z || w&!x&!y 
             //assemble andreturn the output
             //we will build up the output sring element by element
              var output = ''
              if (a)  {output = output + '1'} else {output = output + '0'}
              if (b)  {output = output + '1'} else {output = output + '0'}
              if (c)  {output = output + '1'} else {output = output + '0'}
              if (d)  {output = output + '1'} else {output = output + '0'}
              if (e)  {output = output + '1'} else {output = output + '0'}
              if (f)  {output = output + '1'} else {output = output + '0'}
              if (g)  {output = output + '1'} else {output = output + '0'}
              
              
             return  (output) //initial default just illuminates segment A
        }
        function illuminate(signals) {
            if (signals[0] == '1') {
                document.getElementById('segmentA').innerHTML = ''
                document.getElementById('segmentA').setAttribute('class',"red")}
            else {document.getElementById('segmentA').innnerHTML = ''
                document.getElementById('segmentA').setAttribute('class',"black")}
            if (signals[1] == '1') {
                document.getElementById('segmentB').innerHTML = ''
                document.getElementById('segmentB').setAttribute('class','red')}
            else {document.getElementById('segmentB').innnerHTML = ''
                document.getElementById('segmentB').setAttribute('class',"black")}
            if (signals[2] == '1') {
                document.getElementById('segmentC').innerHTML = ''
                document.getElementById('segmentC').setAttribute('class','red')}
            else {document.getElementById('segmentC').innnerHTML = ''
                document.getElementById('segmentC').setAttribute('class',"black")}
            if (signals[3] == '1') {
                document.getElementById('segmentD').innerHTML = ''
                document.getElementById('segmentD').setAttribute('class','red')}
            else {document.getElementById('segmentD').innnerHTML = ''
                document.getElementById('segmentD').setAttribute('class',"black")}
            if (signals[4] == '1') {
                document.getElementById('segmentE').innerHTML = ''
                document.getElementById('segmentE').setAttribute('class','red')}
            else {document.getElementById('segmentE').innnerHTML = ''
                document.getElementById('segmentE').setAttribute('class',"black")}
            if (signals[5] == '1') {
                document.getElementById('segmentF').innerHTML = ''
                document.getElementById('segmentF').setAttribute('class','red')}
            else {document.getElementById('segmentF').innnerHTML = ''
                document.getElementById('segmentF').setAttribute('class',"black")}
            if (signals[6] == '1') {
                document.getElementById('segmentG').innerHTML = ''
                document.getElementById('segmentG').setAttribute('class','red')}
            else {document.getElementById('segmentG').innnerHTML = ''
                document.getElementById('segmentG').setAttribute('class',"black")}
            }
        
        
        function dec2bin(decimal) {
            //first refinement : lazy lzay way of finding binary
            //version of decimal input - we just look it up in a list
           
            var binary_numbers = ['0000','0001','0010','0011',
                                 '0100','0101','0110','0111',
                                 '1000','1001'];
            return (binary_numbers[decimal]);
        }
        function dec2bin2 (decimal) {
            var quotient =decimal
            var output = ''
            while (quotient > 0) {
            // the % operator is "divide and report remainder"
            remainder = quotient % 2
            if (remainder == 1)
                {output = '1' + output}
            else
                {output = '0' + output}
            //Math is a set of tools for doing math. We
            // access them like functions. Their names are
            // always Math.something
            quotient = Math.floor(quotient/2)
        }
            //The above algorithm leaves off the leading zeros
            //and fails completely on converting 0 base 10. To 
            // fix this we can "pad" the output with leading zeros
            // We will use a while loop(since we don't want any 
            // padding if the output is already four digits) and
            // a "method" we can add to any character string variable
            // called length - it just reports the length of the
            //string
            while (output.length < 4) {output ="0" + output}
            return(output)
        }
    </script>
    <title>Version 8</title>   
    </head>
    
    <body>

        
        <h2> Version 8 Adding BIN2SSD Functionality </h2>
        <table class='mainTable'>
            <tr>
                <td class='blackbox'><h3>Keypad</h3>
                <button type="button" 
                        onclick="display(1)">1</button>
                <button type="button" 
                        onclick="display(2)">2</button>
                <button type="button"
                        onclick="display(3)">3</button>
                <button type="button"
                        onclick="display(4)">4</button>
                <button type="button"
                        onclick="display(5)">5</button>
                <button type="button"
                        onclick="display(6)">6</button>
                <button type="button"
                        onclick="display(7)">7</button>
                <button type="button"
                        onclick="display(8)">8</button>
                <button type="button"
                        onclick="display(9)">9</button>
                <button type="button"
                        onclick="display(0)">0</button>
                </td>
                    
                <td class='blackbox'><h3>Decimal to Binary</h3>
                    <p id="decimal_input">???</p>
                    <p id='binary_output'>???</p></td>
                
                <td class='blackbox'><h3>Binary to SSD signals</h3>
                 <p id="bin2ssd_input"></p>
                <p id="bin2ssd_output"></p>
                </td>
                
                <td class='blackbox'><h3>Illuminate Segments</h3>
                    <table>
                        <tr>
                            <td class="notsevenSegmentTable corner"></td>
                            <td id="segmentA" class="sevenSegmentTable horizontal">A</td>
                            <td class="notsevenSegmentTable corner"></td>
                        </tr>
                        <tr>
                            <td id="segmentF" class="sevenSegmentTable vertical">F</td>
                            <td class="notsevenSegmentTable middle"></td>
                            <td id="segmentB" class="sevenSegmentTable vertical">B</td>
                        </tr>
                        <tr>
                            <td class="notsevenSegmentTable corner"></td>
                            <td id="segmentG" class="sevenSegmentTable horizontal">G</td>
                            <td class="notsevenSegmentTable corner"></td>
                        </tr>
                        <tr>
                            <td id="segmentE" class="sevenSegmentTable vertical">E</td>
                            
                            <td class="notsevenSegmentTable middle"></td>
                            <td id="segmentC" class="sevenSegmentTable vertical">C</td>
                        </tr>
                        <tr>
                            <td class="notsevenSegmentTable corner"></td>
                            <td id="segmentD" class="sevenSegmentTable horizontal">D</td>
                            <td class="notsevenSegmentTable corner"></td>
                        </tr>
                    </table>
                </td>
            </tr>
        </table>
    </body>
</html>
